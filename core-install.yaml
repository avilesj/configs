- name: Install packages
  hosts: localhost
  tasks:
    - name: Install oh my zsh
      register: oh_my_zsh
      changed_when: oh_my_zsh.stdout != "False"
      ansible.builtin.shell:
        cmd: |
          if [ -z ${ZSH+x} ]; then 
            sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
            zsh -c "git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k"
            echo "True"
          fi
            echo "False"
    - name: TPM (Tmux)
      ansible.builtin.shell:
        cmd: |
          rm -rf ~/.tmux
          git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
    - name: Create font directory
      file:
        path: $HOME/.local/share/fonts
        state: directory

    - name: Install Nerd Font
      ansible.builtin.shell:
        cmd: |
          cd ~/.local/share/fonts && curl -fLO https://github.com/ryanoasis/nerd-fonts/raw/HEAD/patched-fonts/JetBrainsMono/Ligatures/Regular/JetBrainsMonoNerdFont-Regular.ttf && cd -
