- name: Configure packages
  hosts: localhost
  tasks:
    - name: Configure NVIM
      ansible.builtin.copy:
        src: ./packages/nvim
        dest: $HOME/.config/
    - name: Configure Alacritty
      ansible.builtin.copy:
        src: ./packages/alacritty
        dest: $HOME/.config/
    - name: Configure dotfiles
      ansible.builtin.copy:
        src: "{{ item }}"
        dest: $HOME/
      loop:
        - ./packages/dotfiles/.zshenv
        - ./packages/dotfiles/.tmux.conf
    - name: Configure Oh my Zsh (Mac)
      when: ansible_distribution == 'MacOSX'
      ansible.builtin.shell:
        cmd: |
          #/bin/bash
          sed -i '' '/ZSH_THEME/d' $HOME/.zshrc
    - name: Configure Oh my Zsh (Linux)
      when: ansible_distribution == 'Debian'
      ansible.builtin.shell:
        cmd: |
          #/bin/bash
          sed -i '/ZSH_THEME/d' $HOME/.zshrc
    - name: Change shell to ZSH (Linux)
      when: ansible_distribution == 'Debian'
      become: yes
      ansible.builtin.shell:
        cmd: |
          #/bin/bash
          sudo chsh -s /bin/zsh $(whoami)
    - name: Configure fd-find (Linux)
      when: ansible_distribution == 'Debian'
      become: yes
      ansible.builtin.shell:
        cmd: |
          #/bin/bash
          mkdir -p ~/.local/bin
          ln -s $(which fdfind) ~/.local/bin/fd
